<!-- Realizado por Alexandra Hurtado -->
{% extends "base.html" %}
{% load i18n %}

{% block content %}
<div class="container mt-5 d-flex justify-content-center">
    <div class="card shadow-lg rounded-4 w-100" style="max-width: 700px; background-color: #fffdf3;">
        
        <!-- Header de la card -->
        <div class="card-header text-center fw-bold fs-4 text-dark" 
             style="background: linear-gradient(90deg, #FFEE8C, #fff7c2); border-top-left-radius: 1rem; border-top-right-radius: 1rem;">
            {% blocktrans with id=pedido.id %}Detalle del Pedido #{{ id }}{% endblocktrans %}
        </div>

        <!-- Cuerpo de la card -->
        <div class="card-body p-4">
            <!-- Informaci贸n del pedido -->
            <p><strong>{% trans "Cliente" %}:</strong> {{ pedido.usuario.nombre }}</p>
            <p><strong>{% trans "Direcci贸n" %}:</strong> {{ pedido.usuario.direccion }}</p>
            <p><strong>{% trans "Estado" %}:</strong> {{ pedido.estado }}</p>
            <p><strong>{% trans "Fecha" %}:</strong> {{ pedido.fecha }}</p>
            <p class="fw-bold"><strong>{% trans "Total" %}:</strong> ${{ pedido.total }}</p>

            <!-- Productos -->
            <h5 class="mt-4 fw-semibold">{% trans "Productos" %}</h5>
            <ul class="list-group mb-4">
                {% for item in pedido.items.all %}
                    <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0">
                        {% blocktrans with cantidad=item.cantidad nombre=item.producto.nombre %}{{ cantidad }} x {{ nombre }}{% endblocktrans %}
                        <span class="fw-semibold">${{ item.precio }}</span>
                    </li>
                {% empty %}
                    <li class="list-group-item border-0 px-0 text-muted">{% trans "No hay productos en este pedido." %}</li>
                {% endfor %}
            </ul>

            <!-- Informaci贸n de pago -->
            {% if pedido.pago %}
                <h5 class="fw-semibold">{% trans "Pago - Estado:" %}</h5>
                {% if pedido.pago.estado|lower == "pendiente" %}
                    <span class="fw-semibold" style="color: #f7a500;">{{ pedido.pago.estado|capfirst }}</span>
                    <div class="mt-3">
                        <a href="{% url 'pedidos:pagar_pedido' pedido.id %}" 
                           class="btn rounded-pill px-4 fw-semibold"
                           style="background: linear-gradient(90deg, #f5d442, #f0b90b); border: none; color: #3a2e00; transition: 0.3s;">
                            {% trans "Ir a Pagar" %}
                        </a>
                    </div>
                {% else %}
                    <span class="fw-semibold text-success">{{ pedido.pago.estado|capfirst }}</span>
                {% endif %}
            {% endif %}

            <!-- Bot贸n de regreso a productos -->
            <div class="mt-4">
                <a href="{% url 'producto:lista_productos' %}" 
                   class="btn rounded-pill px-4 fw-semibold"
                   style="background: #fff8dc; border: 1px solid #e0c75f; color: #6c5c00; transition: 0.3s;">
                    {% trans "Volver a Productos" %}
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
